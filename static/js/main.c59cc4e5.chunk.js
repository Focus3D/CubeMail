(this["webpackJsonpreact-gmail-api"]=this["webpackJsonpreact-gmail-api"]||[]).push([[0],{67:function(e,a,t){e.exports=t(99)},97:function(e,a,t){},99:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),l=t(24),o=t.n(l),i=t(22),s=t(13),c=t(19),u=t(18),m=t(17),d=t(28),p=t(104),g=t(112),f=t(114),b=t(113),E=t(66),h=t(46),y=t(105),v=t(62),w=function(){var e=Object(p.a)(),a=e.isOpen,t=e.onOpen,r=e.onClose,l=Object(g.a)(),o=function(e,a,t){var r="";for(var n in e)r+=n+=": "+e[n]+"\r\n";r+="\r\n"+a;var l=d.Base64.encodeURI(r);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(t)},i=function(e){-1!==e.result.labelIds.indexOf("SENT")?l({title:"Message Sent.",description:"We've Sent your email.",status:"success",duration:9e3,isClosable:!0}):l({title:"An error occurred.",description:"Unable to sent your email.",status:"error",duration:9e3,isClosable:!0})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{w:"100%",h:"48px",leftIcon:v.a,border:"1px",borderRadius:"20px",borderColor:"green.500",variantColor:"green",variant:"solid",onClick:t},"Compose mail"),n.a.createElement(b.a,{isOpen:a,size:"xl",onClose:r,closeOnOverlayClick:!1},n.a.createElement(b.g,null),n.a.createElement(b.d,null,n.a.createElement(b.f,null,"New Message"),n.a.createElement(b.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var a=e.target,t=a.elements.emailTo.value,n=a.elements.subject.value,l=a.elements.message.value;o({To:t,Subject:n},l,i),r()}},n.a.createElement(b.b,null,n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text"})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),n.a.createElement(b.e,null,n.a.createElement(f.a,{type:"reset",variantColor:"blue",mr:3,onClick:r},"Close"),n.a.createElement(f.a,{type:"submit",variantColor:"green"},"Send"))))))},C=t(4),x=t(106),R=t(15),j=t(48),I=(t(97),function(e){var a=e.getMessagesByCategory;return n.a.createElement(n.a.Fragment,null,n.a.createElement(C.a,{w:"16%",h:"100%",bg:"#00043c",color:"white",borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},n.a.createElement(x.b,null,n.a.createElement(x.a,{p:"0.5rem 1rem 1rem"},n.a.createElement(w,null)),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"INBOX",className:"activeBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.c,justifyContent:"flex-start",onClick:a},"Inbox")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"STARRED",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.h,justifyContent:"flex-start",onClick:a},"Starred")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"IMPORTANT",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.d,justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Important")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"SENT",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:j.b,justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Sent")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"DRAFT",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:j.a,justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Drafts")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"TRASH",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:"delete",justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Trash")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"CATEGORY_SOCIAL",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.f,justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Social")),n.a.createElement(x.a,null,n.a.createElement(f.a,{id:"CATEGORY_PROMOTIONS",className:"labelBtn",w:"100%",h:"45px",py:2,pl:8,leftIcon:R.e,justifyContent:"flex-start",variantColor:"blue",variant:"ghost",onClick:a},"Promotions")))))}),O=function(e,a){var t=e.find((function(e){return e.name===a}));return void 0!==t?t.value:void 0},S=function(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0},T=function(e){return e.replace(/['"]+/g,"")},k=t(107),B=t(108),M=t(109),A=t(49),F=t(29),N=t(115),z=t(110),D=function(e){var a=e.handleMessageClick,t=e.messagesRow;return S(t)?n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{direction:"column",wrap:"no-wrap",w:"26%",h:"100%",bg:"#f1f1f1",color:"black"},n.a.createElement(C.a,{py:"5px",bg:"white",border:"1px",borderColor:"gray.200"},n.a.createElement(M.a,{size:"lg"},n.a.createElement(A.a,{children:n.a.createElement(F.a,{name:"search",color:"gray.300"})}),n.a.createElement(h.a,{type:"text",placeholder:"Search mail",borderWidth:"0px",borderRadius:"0px",focusBorderColor:"white"}))),[1,2,3,4,5].map((function(e){return n.a.createElement(k.a,{key:e,justify:"space-around",py:2,borderTop:"1px",borderBottom:"1px",borderColor:"gray.200"},n.a.createElement(C.a,null,n.a.createElement(B.a,{width:"48px",height:"48px",borderRadius:"50%"})),n.a.createElement(C.a,{w:"70%"},n.a.createElement(B.a,{height:"20px",mb:"10px"}),n.a.createElement(B.a,{height:"20px",mb:"10px"}),n.a.createElement(B.a,{height:"30px",mb:"10px"})))})))):n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{direction:"column",wrap:"no-wrap",w:"26%",h:"100%",bg:"#f1f1f1",color:"black"},n.a.createElement(C.a,{py:"5px",bg:"white",border:"1px",borderColor:"gray.200"},n.a.createElement(M.a,{size:"lg"},n.a.createElement(A.a,{children:n.a.createElement(F.a,{name:"search",color:"gray.300"})}),n.a.createElement(h.a,{type:"text",placeholder:"Search mail",borderWidth:"0px",borderRadius:"0px",focusBorderColor:"white"}))),n.a.createElement(C.a,{overflowY:"auto"},t.map((function(e){var t=T(O(e.payload.headers,"From").split("<")[0]),r=O(e.payload.headers,"Subject"),l=e.snippet.substr(0,75),o=e.labelIds.indexOf("UNREAD")>-1?"#fff":"#E2E8F0";return n.a.createElement(k.a,{key:e.id,id:e.id,onClick:a,wrap:"no-wrap",justify:"space-around",py:2,bg:o,borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",cursor:"pointer"},n.a.createElement(N.a,{name:t,src:"https://bit.ly/tioluwani-kolawole"}),n.a.createElement(C.a,{w:"80%"},n.a.createElement(z.a,{fontSize:"sm",color:"gray.700",isTruncated:!0},T(t)),n.a.createElement(z.a,{fontSize:"md",fontWeight:"bold",color:"#3182ce",isTruncated:!0},r),n.a.createElement(z.a,{fontSize:"xs",color:"gray.500"},function(e){var a=document.createElement("textarea");return a.innerHTML=e,a.value}(l))))})))))},U=function(e){var a=e.replayData,t=Object(p.a)(),r=t.isOpen,l=t.onOpen,o=t.onClose,i=Object(g.a)(),s=function(e,a,t){var r="";for(var n in e)r+=n+=": "+e[n]+"\r\n";r+="\r\n"+a;var l=d.Base64.encodeURI(r);window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:l}}).execute(t)},c=function(e){e.result?-1!==e.result.labelIds.indexOf("SENT")&&i({title:"Message Sent.",status:"success",duration:3e3,isClosable:!0}):i({title:"An error occurred.",description:"Unable to sent your replay.",status:"error",duration:3e3,isClosable:!0})};return S(a)?n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{rightIcon:R.g,variantColor:"teal",variant:"outline"},"Replay")):n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{rightIcon:R.g,variantColor:"teal",variant:"outline",onClick:l},"Replay"),n.a.createElement(b.a,{isOpen:r,size:"xl",onClose:o,closeOnOverlayClick:!1},n.a.createElement(b.g,null),n.a.createElement(b.d,null,n.a.createElement(b.f,null,"Replay "),n.a.createElement(b.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var a=e.target,t=a.elements.emailTo.value,r=a.elements.subject.value,n=a.elements["reply-message-id"].value,l=a.elements.message.value;s({To:t,Subject:r,"In-Reply-To":n},l,c),o()}},n.a.createElement(b.b,null,n.a.createElement(h.a,{type:"hidden",id:"reply-message-id",value:a.msgId,readOnly:!0}),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text",value:a.to,readOnly:!0})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:a.subject,readOnly:!0})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical"}))),n.a.createElement(b.e,null,n.a.createElement(f.a,{type:"reset",variantColor:"blue",mr:3,onClick:o},"Close"),n.a.createElement(f.a,{type:"submit",variantColor:"green"},"Send"))))))},q=function(e){var a=e.forwardData,t=e.getMessageBody,r=Object(p.a)(),l=r.isOpen,o=r.onOpen,i=r.onClose,s=Object(g.a)(),c=function(e,a,t){var r="";r+="From: ".concat(O(a,"From")," \r\n"),r+="Date: ".concat(O(a,"Date")," \r\n"),r+="Subject: ".concat(O(a,"Subject")," \r\n"),r+="To: ".concat(e," \r\n"),r+="Content-Type: text/html; charset=UTF-8 \r\n",r+="\r\n ".concat(t),u("me",r,m)},u=function(e,a,t){var r=d.Base64.encodeURI(a);window.gapi.client.gmail.users.messages.send({userId:e,resource:{raw:r}}).execute(t)},m=function(e){e.result?-1!==e.result.labelIds.indexOf("SENT")&&s({title:"Email forwarded Successfully.",status:"success",duration:3e3,isClosable:!0}):s({title:"An error occurred.",description:"Unable to sent your mail.",status:"error",duration:3e3,isClosable:!0})};return S(a)?n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{rightIcon:R.g,variantColor:"teal",variant:"outline"},"Replay")):n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{rightIcon:R.b,variantColor:"teal",variant:"outline",onClick:o},"Forward"),n.a.createElement(b.a,{isOpen:l,size:"xl",onClose:i,closeOnOverlayClick:!1},n.a.createElement(b.g,null),n.a.createElement(b.d,null,n.a.createElement(b.f,null,"Forward "),n.a.createElement(b.c,null),n.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var r=e.target.elements.emailTo.value;c(r,a.payload.headers,t(a.payload)),i()}},n.a.createElement(b.b,null,n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"email",id:"emailTo",placeholder:"To","aria-describedby":"email-helper-text"})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(h.a,{type:"text",id:"subject",placeholder:"Subject","aria-describedby":"subject-email-helper-text",value:O(a.payload.headers,"Subject"),readOnly:!0})),n.a.createElement(E.a,{isRequired:!0},n.a.createElement(y.a,{id:"message",minH:"280px",size:"xl",resize:"vertical",value:"------Forward Message------\r\n"+function(e){var a="";return a+="From: "+O(e,"From")+"\r\n",a+="Date: "+O(e,"Date")+"\r\n",a+="Subject: "+O(e,"Subject")+"\r\n",a+="To: "+O(e,"To")+"\r\n"}(a.payload.headers),readOnly:!0}))),n.a.createElement(b.e,null,n.a.createElement(f.a,{type:"reset",variantColor:"blue",mr:3,onClick:i},"Close"),n.a.createElement(f.a,{type:"submit",variantColor:"green"},"Send"))))))},H=t(111),L=function(e){var a=e.message,t=S(a)?[]:a.payload.headers,r=Object(g.a)();n.a.useEffect((function(){S(a)||l(a)}),[a]);var l=function(e){document.getElementById("iframe").contentWindow.document.body.innerHTML=o(e.payload)},o=function(e){var a="";return a="undefined"===typeof e.parts?e.body.data:i(e.parts),d.Base64.decode(a)},i=function e(a){for(var t=0;t<=a.length;t++){if("undefined"!==typeof a[t].parts)return e(a[t].parts);if("text/html"===a[t].mimeType)return a[t].body.data}return""};return S(a)?n.a.createElement(k.a,{direction:"column",wrap:"no-wrap",w:"58%",h:"100%",p:"0.6rem 1rem",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},n.a.createElement(k.a,{justify:"space-around",wrap:"no-wrap",mb:2}),n.a.createElement(C.a,{className:"mailContainer",mt:6,p:2,display:"flex",align:"center",justifyContent:"center"})):n.a.createElement(k.a,{direction:"column",wrap:"no-wrap",w:"58%",h:"100%",p:"0.6rem 1rem",bg:"white",color:"black",border:"1px",borderColor:"gray.200",borderTopRightRadius:"md",borderBottomRightRadius:"md"},n.a.createElement(k.a,{justify:"space-around",wrap:"no-wrap",mb:2},n.a.createElement(U,{replayData:function(e){var a=void 0!==O(e,"Reply-to")?O(e,"Reply-to"):O(e,"From"),t=O(e,"Subject"),r=O(e,"Message-ID");return{to:"".concat(a),subject:"Re: ".concat(t),msgId:"".concat(r)}}(a.payload.headers)}),n.a.createElement(q,{forwardData:a,getMessageBody:o}),n.a.createElement(f.a,{rightIcon:R.a,variantColor:"teal",variant:"outline",onClick:function(){return e=[a.id],t=["INBOX"],window.gapi.client.gmail.users.messages.batchModify({userId:"me",resource:{ids:e,removeLabelIds:t}}).then((function(e){204===e.status&&r({title:"Message Archived",description:"The Message is now in archive category.",status:"success",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),r({title:"An error occurred.",description:"Unable to Archive Message.",status:"error",duration:3e3,isClosable:!0})}));var e,t}},"Archive"),n.a.createElement(f.a,{rightIcon:"delete",variantColor:"teal",variant:"outline",onClick:function(){return e="me",t=a.id,window.gapi.client.gmail.users.messages.trash({userId:e,id:t}).then((function(e){200===e.status&&r({title:"Message Deleted",status:"error",duration:3e3,isClosable:!0})})).catch((function(e){console.log("error: ",e),r({title:"An error occurred.",description:"Unable to Delete Message.",status:"warning",duration:3e3,isClosable:!0})}));var e,t}},"Delete")),n.a.createElement(C.a,{className:"mailContainer",p:2},n.a.createElement(C.a,{className:"mailHeader",mb:2},n.a.createElement(z.a,{fontSize:"lg",fontWeight:"bold",color:"gray.700",mb:1},O(t,"Subject")),n.a.createElement(k.a,{wrap:"no-wrap",justify:"flex-start"},n.a.createElement(N.a,{name:T(O(t,"From").split("<")[0]),src:"https://bit.ly/tioluwani-kolawole",mr:4}),n.a.createElement(C.a,{w:"80%"},n.a.createElement(z.a,{fontSize:"md",color:"gray.700"},O(t,"From")),n.a.createElement(z.a,{fontSize:"sm",color:"gray.500"},function(e){var a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(a)}(O(t,"Date"))))),n.a.createElement(z.a,{fontSize:"sm",color:"gray.700",mt:1},"To: ".concat(O(t,"To")))),n.a.createElement(C.a,{className:"mailBody"},n.a.createElement(H.a,{ratio:16/9},n.a.createElement(C.a,{as:"iframe",id:"iframe",title:"messageBody"},n.a.createElement("p",null,"Your browser does not support iframes."))))))},P=t(9),W=t(116),X=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).handleAuthResult=function(e){e&&!e.error?(console.log("Sign-in successful"),r.hideAuthBtn(),r.loadClient()):(console.error("handleAuthResult..."),console.error(e),r.displayAuthBtn())},r.hideAuthBtn=function(){document.getElementById("authBtn").style.display="none"},r.displayAuthBtn=function(){document.getElementById("authBtn").style.display="block"},r.handleAuthClick=function(){return window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!1},r.handleAuthResult)},r.loadClient=function(){return window.gapi.client.load("gmail","v1").then((function(e){console.log("gapi client loaded for API"),r.getMessages()}),(function(e){console.error("Error loading window.gapi client for API",e)}))},r.getMessages=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"INBOX";return window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20}).then((function(e){var a=e.result.messages?e.result.messages:[];r.setState({messages:a,messagesRow:[]}),r.getMessagesRow(a)}),(function(e){console.error("getMessages error",e)}))},r.getMessagesRow=function(e){e.map((function(e){return window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id}).then((function(e){r.setState((function(a){return{messagesRow:[].concat(Object(i.a)(a.messagesRow),[e.result])}}))}),(function(e){console.error("getMessagesRow error",e)}))}))},r.getOneMessage=function(e){return window.gapi.client.gmail.users.messages.get({userId:"me",id:e}).then((function(e){r.setState({message:e.result})}),(function(e){console.error("getMessage error",e)}))},r.handleMessageClick=function(e){var a=e.currentTarget.getAttribute("id");r.getOneMessage(a)},r.getMessagesByCategory=function(e){var a=e.target.id;r.getMessages([a])},r.state={messages:[],messagesRow:[],message:{}},r}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",{callback:function(){window.gapi.client.setApiKey("AIzaSyAzQf9oXQG7FR2FixHcVp9ksFK9NQpqKZs"),window.gapi.auth.authorize({client_id:"151874614484-4l3jt39oita663cgip5ts1s7d7npaop6.apps.googleusercontent.com",scope:"https://mail.google.com/",immediate:!0},e.handleAuthResult)},onerror:function(){alert("gapi.client failed to load!")},timeout:5e3,ontimeout:function(){alert("gapi.client could not load in a timely manner!")}})}},{key:"render",value:function(){var e=this.state,a=e.message,t=e.messagesRow;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,null,n.a.createElement(W.a,null),n.a.createElement(f.a,{id:"authBtn",display:"none",variantColor:"teal",variant:"outline",onClick:this.handleAuthClick},"Authorize"),n.a.createElement(k.a,{h:"100vh",minH:"600px",justify:"space-arround",wrap:"no-wrap",p:"1em",bg:"#e5f4f1",color:"white"},n.a.createElement(I,{getMessagesByCategory:this.getMessagesByCategory}),n.a.createElement(D,{handleMessageClick:this.handleMessageClick,messagesRow:t}),n.a.createElement(L,{message:a}))))}}]),t}(r.Component);o.a.render(n.a.createElement(X,null),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.c59cc4e5.chunk.js.map